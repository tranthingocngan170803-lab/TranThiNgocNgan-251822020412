<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç«çœ¼é‡‘ç›ï¼Œé€‰å¯¹ç»“æ„åŠ©è¯ - çš„ã€åœ°ã€å¾—</title>
    <style>
        :root {
            --primary-color: #4a6baf;
            --secondary-color: #f0c040;
            --success-color: #4caf50;
            --error-color: #f44336;
            --light-color: #f5f5f5;
            --dark-color: #333;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), #6a89cc);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .game-setup {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .setup-options {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .player-option {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .player-option:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
        }
        
        .player-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(74, 107, 175, 0.1);
        }
        
        .player-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .game-area {
            display: none;
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .score-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.5s;
        }
        
        .question-area {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--light-color);
            border-radius: 8px;
            position: relative;
        }
        
        .question-text {
            font-size: 1.8rem;
            margin-bottom: 20px;
            line-height: 1.4;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .star-indicator {
            color: var(--secondary-color);
            font-size: 1.5rem;
            margin-left: 10px;
            text-shadow: 0 0 5px rgba(240, 192, 64, 0.8);
            animation: star-pulse 1.5s infinite alternate;
        }
        
        @keyframes star-pulse {
            from { transform: scale(1); }
            to { transform: scale(1.2); }
        }
        
        .star-badge {
            display: inline-flex;
            align-items: center;
            background-color: #fff9e6;
            border: 2px solid var(--secondary-color);
            border-radius: 20px;
            padding: 5px 12px;
            margin-left: 10px;
            font-size: 1rem;
            color: #e6a700;
            font-weight: bold;
        }
        
        .star-badge .star-icon {
            margin-right: 5px;
            font-size: 1.2rem;
        }
        
        .speech-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .answers-area {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .answer-option {
            padding: 15px 30px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.5rem;
            min-width: 100px;
            text-align: center;
        }
        
        .answer-option:hover {
            border-color: var(--primary-color);
            background-color: rgba(74, 107, 175, 0.1);
        }
        
        .answer-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(74, 107, 175, 0.2);
        }
        
        .answer-option.correct {
            border-color: var(--success-color);
            background-color: rgba(76, 175, 80, 0.2);
        }
        
        .answer-option.incorrect {
            border-color: var(--error-color);
            background-color: rgba(244, 67, 54, 0.2);
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            background-color: var(--primary-color);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            background-color: #3a5a9f;
            transform: translateY(-2px);
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background-color: #6c757d;
        }
        
        .btn-secondary:hover {
            background-color: #5a6268;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #3d8b40;
        }
        
        .btn-warning {
            background-color: var(--secondary-color);
            color: var(--dark-color);
        }
        
        .btn-warning:hover {
            background-color: #e0b040;
        }
        
        .result-area {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            display: none;
        }
        
        .result-correct {
            background-color: rgba(76, 175, 80, 0.1);
            border: 1px solid var(--success-color);
        }
        
        .result-incorrect {
            background-color: rgba(244, 67, 54, 0.1);
            border: 1px solid var(--error-color);
        }
        
        .explanation {
            margin-top: 15px;
            text-align: left;
            padding: 15px;
            background-color: white;
            border-radius: 5px;
            border-left: 4px solid var(--primary-color);
        }
        
        .players-track {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .player-track {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--light-color);
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .player-track.active {
            border: 2px solid var(--primary-color);
            background-color: rgba(74, 107, 175, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .player-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .player-score {
            font-size: 1.2rem;
            color: var(--primary-color);
        }
        
        .player-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin: 0 auto 10px;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .settings-panel {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            display: none;
        }
        
        .setting-group {
            margin-bottom: 20px;
        }
        
        .setting-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        select, input[type="range"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .voice-test {
            margin-top: 10px;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .wrong-questions {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            display: none;
        }
        
        .wrong-item {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .wrong-item:last-child {
            border-bottom: none;
        }
        
        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            display: none;
        }
        
        .score-change {
            font-weight: bold;
            margin-top: 10px;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }
        
        .score-positive {
            color: var(--success-color);
            background-color: rgba(76, 175, 80, 0.1);
        }
        
        .score-negative {
            color: var(--error-color);
            background-color: rgba(244, 67, 54, 0.1);
        }
        
        @media (max-width: 768px) {
            .answers-area {
                gap: 10px;
            }
            
            .answer-option {
                padding: 12px 20px;
                font-size: 1.3rem;
                min-width: 80px;
            }
            
            .question-text {
                font-size: 1.5rem;
            }
            
            .players-track {
                flex-direction: column;
            }
            
            .star-badge {
                font-size: 0.9rem;
                padding: 4px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç«çœ¼é‡‘ç›ï¼Œé€‰å¯¹ç»“æ„åŠ©è¯ - çš„ã€åœ°ã€å¾—</h1>
            <p class="subtitle">Tinh máº¯t, Chá»n Ä‘Ãºng - PhÃ¢n biá»‡t çš„ã€å¾—ã€åœ° trong tiáº¿ng Trung</p>
        </header>
        
        <section class="game-setup" id="gameSetup">
            <h2>é€‰æ‹©æ¸¸æˆæ¨¡å¼</h2>
            <p>è¯·é€‰æ‹©ç©å®¶æ•°é‡å’Œæ¸¸æˆæ¨¡å¼ï¼š</p>
            
            <div class="setup-options">
                <div class="player-option" data-players="1" data-bots="0">
                    <div class="player-icon">ğŸ‘¤</div>
                    <h3>å•äººæ¸¸æˆ</h3>
                    <p>ç‹¬è‡ªæŒ‘æˆ˜è¯­æ³•éš¾é¢˜</p>
                </div>
                
                <div class="player-option" data-players="1" data-bots="1">
                    <div class="player-icon">ğŸ‘¤ğŸ¤–</div>
                    <h3>å¯¹æˆ˜ä¸€ä¸ªç”µè„‘</h3>
                    <p>ä¸ç”µè„‘AIç«äº‰</p>
                </div>
                
                <div class="player-option" data-players="2" data-bots="0">
                    <div class="player-icon">ğŸ‘¤ğŸ‘¤</div>
                    <h3>åŒäººå¯¹æˆ˜</h3>
                    <p>ä¸æœ‹å‹ä¸€èµ·ç©</p>
                </div>
            </div>
            
            <div class="game-controls">
                <button id="startGameBtn" class="btn-success">å¼€å§‹æ¸¸æˆ</button>
                <button id="settingsBtn" class="btn-secondary">è®¾ç½®</button>
                <button id="wrongQuestionsBtn" class="btn-secondary">é”™é¢˜æœ¬</button>
            </div>
        </section>
        
        <section class="settings-panel" id="settingsPanel">
            <h2>æ¸¸æˆè®¾ç½®</h2>
            
            <div class="setting-group">
                <label class="setting-label" for="voiceSelect">è¯­éŸ³é€‰æ‹©</label>
                <select id="voiceSelect">
                    <option value="">åŠ è½½ä¸­...</option>
                </select>
                <div class="voice-test">
                    <button id="testVoiceBtn">æµ‹è¯•è¯­éŸ³</button>
                    <span id="voiceStatus"></span>
                </div>
            </div>
            
            <div class="setting-group">
                <label class="setting-label" for="speedSlider">è¯­éŸ³é€Ÿåº¦</label>
                <input type="range" id="speedSlider" min="0.5" max="2" step="0.1" value="1">
                <span id="speedValue">1.0</span>
            </div>
            
            <div class="setting-group">
                <label class="setting-label" for="pitchSlider">è¯­éŸ³éŸ³è°ƒ</label>
                <input type="range" id="pitchSlider" min="0.5" max="2" step="0.1" value="1">
                <span id="pitchValue">1.0</span>
            </div>
            
            <div class="game-controls">
                <button id="saveSettingsBtn" class="btn-success">ä¿å­˜è®¾ç½®</button>
                <button id="closeSettingsBtn" class="btn-secondary">å…³é—­</button>
            </div>
        </section>
        
        <section class="wrong-questions" id="wrongQuestionsPanel">
            <h2>é”™é¢˜æœ¬</h2>
            <div id="wrongQuestionsList">
                <!-- é”™é¢˜å°†åŠ¨æ€åŠ è½½åˆ°è¿™é‡Œ -->
            </div>
            <div class="game-controls">
                <button id="clearWrongQuestionsBtn" class="btn-warning">æ¸…ç©ºé”™é¢˜æœ¬</button>
                <button id="closeWrongQuestionsBtn" class="btn-secondary">å…³é—­</button>
            </div>
        </section>
        
        <section class="game-area" id="gameArea">
            <div class="game-header">
                <div class="score-display">å½“å‰ç©å®¶: <span id="currentPlayerName">ç©å®¶1</span></div>
                <div>é—®é¢˜: <span id="currentQuestion">1</span>/<span id="totalQuestions">10</span></div>
                <button id="restartGameBtn" class="btn-secondary">é‡æ–°å¼€å§‹</button>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="players-track" id="playersTrack">
                <!-- ç©å®¶è½¨é“å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="question-area">
                <div class="question-text" id="questionText">
                    <!-- é—®é¢˜å°†åŠ¨æ€åŠ è½½åˆ°è¿™é‡Œ -->
                    <span class="star-indicator" id="starIndicator">â˜…</span>
                </div>
                
                <div class="speech-controls">
                    <button id="repeatQuestionBtn">é‡å¤æœ—è¯»</button>
                </div>
            </div>
            
            <div class="answers-area" id="answersArea">
                <!-- ç­”æ¡ˆé€‰é¡¹å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="game-controls">
                <button id="submitAnswerBtn" disabled>æäº¤ç­”æ¡ˆ</button>
                <button id="nextQuestionBtn" style="display:none;">ç»§ç»­</button>
            </div>
            
            <div class="result-area" id="resultArea">
                <!-- ç»“æœå°†åŠ¨æ€æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
        </section>
    </div>
    
    <div class="fireworks" id="fireworks"></div>

    <script>
        // æ¸¸æˆæ•°æ®
        const QUESTIONS = [
            {id:1, text:'ä»–æ˜¯ä¸€ä¸ªå¾ˆèªæ˜___å­¦ç”Ÿã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'å½¢å®¹è¯"èªæ˜"ä¿®é¥°åè¯"å­¦ç”Ÿ"ï¼Œç”¨"çš„"ã€‚',vi:'"èªæ˜" lÃ  tÃ­nh tá»« bá»• nghÄ©a cho danh tá»« "å­¦ç”Ÿ", nÃªn dÃ¹ng çš„.'}, star:false},
            {id:2, text:'å¥¹ç¬‘___å¾ˆå¼€å¿ƒã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"ç¬‘"åè¡¥å……ç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"ç¬‘" lÃ  Ä‘á»™ng tá»«, "å¾ˆå¼€å¿ƒ" diá»…n táº£ má»©c Ä‘á»™ â†’ dÃ¹ng å¾—.'}, star:false},
            {id:3, text:'ä»–ä»¬è¯´___å¾ˆå¿«ï¼Œæˆ‘å¬ä¸æ‡‚ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"è¯´"åè¡¥å……æ–¹å¼å’Œç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"è¯´å¾—å¾ˆå¿«" = nÃ³i ráº¥t nhanh â†’ dÃ¹ng å¾—.'}, star:false},
            {id:4, text:'è¯·ä½ æ…¢æ…¢___è¯´ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯"æ…¢æ…¢"ä¿®é¥°åŠ¨è¯"è¯´"ï¼Œç”¨"åœ°"ã€‚',vi:'"æ…¢æ…¢" (tá»« chá»‰ cÃ¡ch thá»©c) bá»• nghÄ©a cho "è¯´" â†’ dÃ¹ng åœ°.'}, star:false},
            {id:5, text:'è¿™æ˜¯ä¸€å¼ æ¼‚äº®___ç…§ç‰‡ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'å½¢å®¹è¯"æ¼‚äº®"ä¿®é¥°åè¯"ç…§ç‰‡"ï¼Œç”¨"çš„"ã€‚',vi:'"æ¼‚äº®" bá»• nghÄ©a cho danh tá»« â†’ dÃ¹ng çš„.'}, star:false},
            {id:6, text:'å¥¹é«˜å…´___è·³äº†èµ·æ¥ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"è·³"å‰é¢æ˜¯è¡¨ç¤ºç»“æœã€ç¨‹åº¦çš„çŸ­è¯­"é«˜å…´å¾—è·³èµ·æ¥"ã€‚',vi:'"vui Ä‘áº¿n má»©c nháº£y lÃªn" â†’ chá»‰ káº¿t quáº£ â†’ dÃ¹ng å¾—.'}, star:false},
            {id:7, text:'æˆ‘è®¤çœŸ___å†™ä½œä¸šã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯"è®¤çœŸ"ä¿®é¥°åŠ¨è¯"å†™"ï¼Œç”¨"åœ°"ã€‚',vi:'"è®¤çœŸ" lÃ  cÃ¡ch lÃ m viá»‡c â†’ dÃ¹ng åœ°.'}, star:false},
            {id:8, text:'ä»–è·‘___æ¯”æˆ‘å¿«ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"è·‘"åé¢è¡¥å……æ¯”è¾ƒç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"cháº¡y nhanh hÆ¡n tÃ´i" â†’ chá»‰ má»©c Ä‘á»™ â†’ å¾—.'}, star:false},
            {id:9, text:'å¦¹å¦¹åš___é¥­å¾ˆå¥½åƒã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'åè¯æ€§çŸ­è¯­"åšçš„é¥­"="é¥­ï¼ˆæ˜¯å¦¹å¦¹åšçš„ï¼‰"ï¼Œç”¨"çš„"ã€‚',vi:'"cÆ¡m (mÃ  em gÃ¡i náº¥u)" â†’ bá»• ngá»¯ Ä‘á»‹nh ngá»¯ â†’ çš„.'}, star:false},
            {id:10, text:'ä»–ç©¿___è¡£æœå¾ˆæ—¶å°šã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"ç©¿çš„è¡£æœ"ä½œä¸»è¯­ï¼Œ"çš„"è¿æ¥åŠ¨è¯ä¸åè¯ã€‚',vi:'"quáº§n Ã¡o mÃ  anh áº¥y máº·c" â†’ dÃ¹ng çš„.'}, star:false},
            {id:11, text:'é‚£ä¸ªå­¦ç”Ÿå†™___å­—å¾ˆæ¼‚äº®ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'"å†™"æ˜¯åŠ¨è¯ï¼Œ"å¾—"å¼•å‡ºç»“æœæˆ–ç¨‹åº¦ã€‚',vi:'"viáº¿t chá»¯ ráº¥t Ä‘áº¹p" â†’ å¾—.'}, star:false},
            {id:12, text:'å¥¹è½»è½»___å…³ä¸Šé—¨ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯"è½»è½»"ä¿®é¥°åŠ¨è¯"å…³"ï¼Œç”¨"åœ°"ã€‚',vi:'"Ä‘Ã³ng cá»­a nháº¹ nhÃ ng" â†’ chá»‰ cÃ¡ch thá»©c â†’ åœ°.'}, star:false},
            {id:13, text:'æˆ‘ä¹°äº†ä¸€æœ¬æœ‰è¶£___ä¹¦ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"æœ‰è¶£"ä¿®é¥°åè¯"ä¹¦"ï¼Œç”¨"çš„"ã€‚',vi:'"má»™t quyá»ƒn sÃ¡ch thÃº vá»‹" â†’ çš„.'}, star:false},
            {id:14, text:'ä»–ç´¯___ååœ¨æ²™å‘ä¸Šã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'"ç´¯å¾—åä¸‹"è¡¨ç¤ºç»“æœï¼Œç”¨"å¾—"ã€‚',vi:'"má»‡t Ä‘áº¿n má»©c ngá»“i xuá»‘ng" â†’ å¾—.'}, star:false},
            {id:15, text:'å¥¹å”±___å¾ˆå¥½å¬ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"å”±"åè¡¨ç¤ºç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"hÃ¡t ráº¥t hay" â†’ å¾—.'}, star:false},
            {id:16, text:'ä»–ä»¬å¼€å¿ƒ___èŠå¤©ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯"å¼€å¿ƒ"ä¿®é¥°åŠ¨è¯"èŠå¤©"ï¼Œç”¨"åœ°"ã€‚',vi:'"nÃ³i chuyá»‡n má»™t cÃ¡ch vui váº»" â†’ åœ°.'}, star:false},
            {id:17, text:'ä½ æŠŠé—¨å…³___å¤ªç´§äº†ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"å…³"åè¡¨ç¤ºç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"Ä‘Ã³ng cá»­a quÃ¡ cháº·t" â†’ å¾—.'}, star:false},
            {id:18, text:'æˆ‘å–œæ¬¢å¬ä½ è®²___æ•…äº‹ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"è®²çš„æ•…äº‹"è¡¨ç¤º"æ•…äº‹ï¼ˆä½ è®²çš„ï¼‰"ï¼Œç”¨"çš„"ã€‚',vi:'"cÃ¢u chuyá»‡n mÃ  báº¡n ká»ƒ" â†’ çš„.'}, star:false},
            {id:19, text:'å¥¹æ…¢æ…¢___èµ°è¿›æ•™å®¤ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯"æ…¢æ…¢"ä¿®é¥°åŠ¨è¯"èµ°"ï¼Œç”¨"åœ°"ã€‚',vi:'"bÆ°á»›c vÃ o lá»›p tá»« tá»«" â†’ åœ°.'}, star:false},
            {id:20, text:'å“¥å“¥å†™___ä½œæ–‡è¢«è€å¸ˆè¡¨æ‰¬äº†ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"å†™çš„ä½œæ–‡"è¡¨ç¤ºå®šè¯­ï¼Œç”¨"çš„"ã€‚',vi:'"bÃ i vÄƒn mÃ  anh viáº¿t" â†’ çš„.'}, star:false},
            {id:21, text:'æˆ‘ä»¬ç”¨åŠ›___æ¨é—¨ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯"ç”¨åŠ›"ä¿®é¥°åŠ¨è¯"æ¨"ï¼Œç”¨"åœ°"ã€‚',vi:'"Ä‘áº©y cá»­a máº¡nh máº½" â†’ åœ°.'}, star:false},
            {id:22, text:'ä»–å¾ˆè®¤çœŸ___å­¦ä¹ ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯"è®¤çœŸ"ä¿®é¥°åŠ¨è¯"å­¦ä¹ "ï¼Œç”¨"åœ°"ã€‚',vi:'"há»c má»™t cÃ¡ch chÄƒm chá»‰" â†’ åœ°.'}, star:false},
            {id:23, text:'å¦ˆå¦ˆåš___èœç‰¹åˆ«é¦™ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"åšçš„èœ"ä½œä¸»è¯­ï¼Œç”¨"çš„"ã€‚',vi:'"mÃ³n Äƒn mÃ  máº¹ náº¥u" â†’ çš„.'}, star:false},
            {id:24, text:'å°æé«˜é«˜å…´å…´___å»ä¸Šå­¦ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯æ€§ç»“æ„ä¿®é¥°åŠ¨è¯"å»"ï¼Œç”¨"åœ°"ã€‚',vi:'"Ä‘i há»c má»™t cÃ¡ch vui váº»" â†’ åœ°.'}, star:false},
            {id:25, text:'ä½ å‡†å¤‡___æ€ä¹ˆæ ·ï¼Ÿ', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"å‡†å¤‡"åé¢è¡¥å……ç»“æœ/ç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"chuáº©n bá»‹ nhÆ° tháº¿ nÃ o rá»“i" â†’ å¾—.'}, star:false},
            {id:26, text:'è¿™æœ¬ä¹¦æ˜¯æˆ‘æœ€å–œæ¬¢___ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'å¥æœ«çš„"çš„"ä»£è¯åŒ–ï¼Œè¡¨ç¤º"æˆ‘æœ€å–œæ¬¢çš„ä¹¦"ã€‚',vi:'"cuá»‘n mÃ  tÃ´i thÃ­ch nháº¥t" â†’ çš„.'}, star:false},
            {id:27, text:'å¥¹è¯´___å£°éŸ³å¾ˆå°ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"è¯´çš„å£°éŸ³"="å¥¹è¯´è¯æ—¶çš„å£°éŸ³"ï¼Œä¿®é¥°åè¯ï¼Œç”¨"çš„"ã€‚',vi:'"giá»ng nÃ³i khi cÃ´ áº¥y nÃ³i" â†’ çš„.'}, star:false},
            {id:28, text:'å­©å­ä»¬å¿«ä¹___ç©æ¸¸æˆã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'"å¿«ä¹åœ°"ä¿®é¥°åŠ¨è¯"ç©"ï¼Œç”¨"åœ°"ã€‚',vi:'"chÆ¡i vui váº»" â†’ åœ°.'}, star:false},
            {id:29, text:'ä»–ç¬‘___çœ¼ç›éƒ½æ²¡äº†ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"ç¬‘"åè¡¥å……ç»“æœï¼Œç”¨"å¾—"ã€‚',vi:'"cÆ°á»i Ä‘áº¿n ná»—i khÃ´ng tháº¥y máº¯t" â†’ å¾—.'}, star:false},
            {id:30, text:'è¿™æ˜¯æˆ‘æœ‹å‹é€ç»™æˆ‘___ç¤¼ç‰©ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'åŠ¨è¯çŸ­è¯­ä½œå®šè¯­ï¼Œç”¨"çš„"ã€‚',vi:'"mÃ³n quÃ  mÃ  báº¡n táº·ng tÃ´i" â†’ çš„.'}, star:false},
            {id:31, text:'è€å¸ˆè€å¿ƒ___è§£é‡Šé—®é¢˜ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯"è€å¿ƒ"ä¿®é¥°åŠ¨è¯"è§£é‡Š"ï¼Œç”¨"åœ°"ã€‚',vi:'"giáº£i thÃ­ch má»™t cÃ¡ch kiÃªn nháº«n" â†’ åœ°.'}, star:false},
            {id:32, text:'å¥¹è·³èˆè·³___å¾ˆå¥½ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"è·³"åè¡¥å……ç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"nháº£y ráº¥t giá»i" â†’ å¾—.'}, star:false},
            {id:33, text:'ä»–åŠªåŠ›___å·¥ä½œã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'å‰¯è¯"åŠªåŠ›"ä¿®é¥°åŠ¨è¯"å·¥ä½œ"ï¼Œç”¨"åœ°"ã€‚',vi:'"lÃ m viá»‡c chÄƒm chá»‰" â†’ åœ°.'}, star:false},
            {id:34, text:'å¦ˆå¦ˆä¹°äº†æ–°é²œ___æ°´æœã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"æ–°é²œ"ä¿®é¥°åè¯"æ°´æœ"ï¼Œç”¨"çš„"ã€‚',vi:'"trÃ¡i cÃ¢y tÆ°Æ¡i" â†’ çš„.'}, star:false},
            {id:35, text:'è¿™å­©å­å†™___å¤ªä¹±äº†ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"å†™"åè¡¥å……ç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"viáº¿t quÃ¡ cáº©u tháº£" â†’ å¾—.'}, star:false},
            {id:36, text:'ä»–è·‘___å¤ªå¿«äº†ï¼Œæˆ‘è¿½ä¸ä¸Šã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"è·‘"åè¡¨ç¤ºç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"cháº¡y quÃ¡ nhanh" â†’ å¾—.'}, star:false},
            {id:37, text:'æˆ‘å–œæ¬¢å¥¹ç”œç”œ___ç¬‘å®¹ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"ç”œç”œ"ä¿®é¥°åè¯"ç¬‘å®¹"ï¼Œç”¨"çš„"ã€‚',vi:'"ná»¥ cÆ°á»i ngá»t ngÃ o" â†’ çš„.'}, star:false},
            {id:38, text:'å¥¹å°å¿ƒ___æ‹¿èµ·æ¯å­ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'"å°å¿ƒ"ä¿®é¥°åŠ¨è¯"æ‹¿èµ·"ï¼Œç”¨"åœ°"ã€‚',vi:'"nháº¹ nhÃ ng cáº§m ly" â†’ åœ°.'}, star:false},
            {id:39, text:'ä»–ç´§å¼ ___è¯´ä¸å‡ºè¯æ¥ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'è¡¨ç¤ºç»“æœ"ç´§å¼ å¾—è¯´ä¸å‡ºè¯"ï¼Œç”¨"å¾—"ã€‚',vi:'"há»“i há»™p Ä‘áº¿n má»©c khÃ´ng nÃ³i Ä‘Æ°á»£c" â†’ å¾—.'}, star:false},
            {id:40, text:'æˆ‘ä»Šå¤©å¿ƒæƒ…å¾ˆå¥½ï¼Œå”±___ç‰¹åˆ«å“ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"å”±"åè¡¥å……ç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"hÃ¡t ráº¥t to" â†’ å¾—.'}, star:false},
            // å¸Œæœ›ä¹‹æ˜Ÿé¢˜ç›®
            {id:41, text:'å¥¹æŠŠå¤´å‘å‰ª___å¾ˆçŸ­ï¼Œçœ‹èµ·æ¥æ›´ç²¾ç¥äº†ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"å‰ª"åè¡¥å……ç»“æœ"å¾ˆçŸ­"ï¼Œç”¨"å¾—"ã€‚',vi:'"cáº¯t tÃ³c ngáº¯n Ä‘i" â†’ å¾—.'}, star:true},
            {id:42, text:'é‚£ä¸ªé—®é¢˜ä½ è§£é‡Š___å¾ˆæ¸…æ¥šï¼Œæˆ‘ç»ˆäºæ˜ç™½äº†ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'åŠ¨è¯"è§£é‡Š"åè¡¨ç¤ºç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"giáº£i thÃ­ch ráº¥t rÃµ rÃ ng" â†’ å¾—.'}, star:true},
            {id:43, text:'ä»–æ€¥___è·‘å‡ºå»ï¼Œè¿ä¼éƒ½å¿˜äº†æ‹¿ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'"æ€¥"ä¿®é¥°åŠ¨è¯"è·‘"ï¼Œç”¨"åœ°"ã€‚',vi:'"vá»™i vÃ ng cháº¡y ra ngoÃ i" â†’ åœ°.'}, star:true},
            {id:44, text:'å¥¹è¯´è¯___æ ·å­è®©äººå¾ˆèˆ’æœã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"è¯´è¯çš„æ ·å­"æ˜¯åè¯çŸ­è¯­ï¼Œç”¨"çš„"ã€‚',vi:'"dÃ¡ng váº» khi nÃ³i chuyá»‡n" â†’ çš„.'}, star:true},
            {id:45, text:'æˆ‘è¢«ä»–æ„ŸåŠ¨___å“­äº†ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'è¡¨ç¤ºç»“æœ"æ„ŸåŠ¨å¾—å“­äº†"ï¼Œç”¨"å¾—"ã€‚',vi:'"xÃºc Ä‘á»™ng Ä‘áº¿n má»©c khÃ³c" â†’ å¾—.'}, star:true},
            {id:46, text:'è¿™ç¯‡æ–‡ç« å†™___æ—¢ç”ŸåŠ¨åˆæœ‰æ„æ€ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'"å†™å¾—"è¡¨ç¤ºç¨‹åº¦ï¼Œç”¨"å¾—"ã€‚',vi:'"bÃ i viáº¿t ráº¥t sinh Ä‘á»™ng, thÃº vá»‹" â†’ å¾—.'}, star:true},
            {id:47, text:'ä»–æŠŠæˆ¿é—´æ‰“æ‰«___å¹²å¹²å‡€å‡€ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'B', explanation:{zh:'è¡¨ç¤ºç»“æœï¼Œç”¨"å¾—"ã€‚',vi:'"dá»n phÃ²ng ráº¥t sáº¡ch" â†’ å¾—.'}, star:true},
            {id:48, text:'ä»–ä»¬å®‰é™___å¬è€å¸ˆè®²è¯¾ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'"å®‰é™åœ°å¬"æ˜¯å‰¯è¯ä¿®é¥°åŠ¨è¯ã€‚',vi:'"láº¯ng nghe yÃªn láº·ng" â†’ åœ°.'}, star:true},
            {id:49, text:'ä»–ä¸€è„¸è®¤çœŸ___è¡¨æƒ…ã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'A', explanation:{zh:'"è®¤çœŸ"ä¿®é¥°åè¯"è¡¨æƒ…"ï¼Œç”¨"çš„"ã€‚',vi:'"váº» máº·t nghiÃªm tÃºc" â†’ çš„.'}, star:true},
            {id:50, text:'å­©å­é«˜å…´___æŠ±ä½äº†å¦ˆå¦ˆã€‚', answers:{A:'çš„',B:'å¾—',C:'åœ°'}, correct:'C', explanation:{zh:'"é«˜å…´åœ°æŠ±ä½"â†’ å‰¯è¯ä¿®é¥°åŠ¨è¯ã€‚',vi:'"vui má»«ng Ã´m láº¥y máº¹" â†’ åœ°.'}, star:true}
        ];

        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            players: [],
            currentPlayerIndex: 0,
            currentRound: 0,
            questions: [],
            selectedAnswer: null,
            isGameStarted: false,
            speechSettings: {
                voice: null,
                rate: 1,
                pitch: 1
            },
            botTimer: null,
            currentQuestion: null // æ·»åŠ å½“å‰é—®é¢˜å¼•ç”¨
        };

        // DOM å…ƒç´ 
        const gameSetup = document.getElementById('gameSetup');
        const gameArea = document.getElementById('gameArea');
        const settingsPanel = document.getElementById('settingsPanel');
        const wrongQuestionsPanel = document.getElementById('wrongQuestionsPanel');
        const playersTrack = document.getElementById('playersTrack');
        const questionText = document.getElementById('questionText');
        const answersArea = document.getElementById('answersArea');
        const submitAnswerBtn = document.getElementById('submitAnswerBtn');
        const nextQuestionBtn = document.getElementById('nextQuestionBtn');
        const resultArea = document.getElementById('resultArea');
        const currentQuestionSpan = document.getElementById('currentQuestion');
        const totalQuestionsSpan = document.getElementById('totalQuestions');
        const progressFill = document.getElementById('progressFill');
        const currentPlayerName = document.getElementById('currentPlayerName');
        const restartGameBtn = document.getElementById('restartGameBtn');
        const starIndicator = document.getElementById('starIndicator');
        const repeatQuestionBtn = document.getElementById('repeatQuestionBtn');

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
            document.querySelectorAll('.player-option').forEach(option => {
                option.addEventListener('click', selectGameMode);
            });
            
            document.getElementById('startGameBtn').addEventListener('click', startGame);
            document.getElementById('settingsBtn').addEventListener('click', showSettings);
            document.getElementById('wrongQuestionsBtn').addEventListener('click', showWrongQuestions);
            document.getElementById('saveSettingsBtn').addEventListener('click', saveSettings);
            document.getElementById('closeSettingsBtn').addEventListener('click', closeSettings);
            document.getElementById('closeWrongQuestionsBtn').addEventListener('click', closeWrongQuestions);
            document.getElementById('clearWrongQuestionsBtn').addEventListener('click', clearWrongQuestions);
            document.getElementById('repeatQuestionBtn').addEventListener('click', speakQuestion);
            document.getElementById('speedSlider').addEventListener('input', updateSpeedValue);
            document.getElementById('pitchSlider').addEventListener('input', updatePitchValue);
            document.getElementById('testVoiceBtn').addEventListener('click', testVoice);
            
            // åˆå§‹åŒ–è¯­éŸ³è®¾ç½®
            initSpeechSettings();
            
            // åˆå§‹åŒ–é”™é¢˜æœ¬
            initWrongQuestions();
            
            // ç»‘å®šé‡æ–°å¼€å§‹æŒ‰é’®äº‹ä»¶
            restartGameBtn.addEventListener('click', restartGame);
        }

        // é€‰æ‹©æ¸¸æˆæ¨¡å¼
        function selectGameMode(e) {
            const option = e.currentTarget;
            document.querySelectorAll('.player-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            option.classList.add('selected');
        }

        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            const selectedOption = document.querySelector('.player-option.selected');
            if (!selectedOption) {
                alert('è¯·é€‰æ‹©æ¸¸æˆæ¨¡å¼ï¼');
                return;
            }
            
            const players = parseInt(selectedOption.dataset.players);
            const bots = parseInt(selectedOption.dataset.bots);
            
            // åˆå§‹åŒ–ç©å®¶
            gameState.players = [];
            for (let i = 0; i < players; i++) {
                gameState.players.push({
                    id: i,
                    name: `ç©å®¶${i+1}`,
                    score: 0,
                    isBot: false
                });
            }
            
            for (let i = 0; i < bots; i++) {
                gameState.players.push({
                    id: players + i,
                    name: `ç”µè„‘${i+1}`,
                    score: 0,
                    isBot: true
                });
            }
            
            // å‡†å¤‡é—®é¢˜ - æ¯å±€10é¢˜
            prepareQuestions();
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState.currentPlayerIndex = 0;
            gameState.currentRound = 0;
            gameState.isGameStarted = true;
            
            // æ˜¾ç¤ºæ¸¸æˆåŒºåŸŸ
            gameSetup.style.display = 'none';
            gameArea.style.display = 'block';
            
            // åˆå§‹åŒ–ç©å®¶è½¨é“
            initPlayersTrack();
            
            // å¼€å§‹ç¬¬ä¸€è½®
            nextRound();
        }

        // å‡†å¤‡é—®é¢˜ - æ¯å±€10é¢˜ï¼Œæ ¹æ®ç©å®¶æ•°é‡è®¾ç½®å¸Œæœ›ä¹‹æ˜Ÿé¢˜ç›®
        function prepareQuestions() {
            // å¤åˆ¶é—®é¢˜æ•°ç»„
            let allQuestions = [...QUESTIONS];
            
            // åˆ†ç¦»æ™®é€šé¢˜ç›®å’Œå¸Œæœ›ä¹‹æ˜Ÿé¢˜ç›®
            let normalQuestions = allQuestions.filter(q => !q.star);
            let starQuestions = allQuestions.filter(q => q.star);
            
            // éšæœºé€‰æ‹©é¢˜ç›®
            shuffleArray(normalQuestions);
            shuffleArray(starQuestions);
            
            // æ ¹æ®ç©å®¶æ•°é‡ç¡®å®šå¸Œæœ›ä¹‹æ˜Ÿé¢˜ç›®æ•°é‡
            const totalPlayers = gameState.players.length;
            let starCount = 1; // é»˜è®¤1é¢˜å¸Œæœ›ä¹‹æ˜Ÿ
            
            if (totalPlayers === 2) {
                starCount = 2; // åŒäººæ¸¸æˆæ¯äºº1é¢˜å¸Œæœ›ä¹‹æ˜Ÿ
            }
            
            // ç¡®ä¿å¸Œæœ›ä¹‹æ˜Ÿé¢˜ç›®æ•°é‡ä¸è¶…è¿‡å¯ç”¨æ•°é‡
            starCount = Math.min(starCount, starQuestions.length);
            
            // è®¡ç®—æ™®é€šé¢˜ç›®æ•°é‡
            const normalCount = 10 - starCount;
            
            // é€‰æ‹©é¢˜ç›®
            let selectedQuestions = [];
            
            // æ·»åŠ æ™®é€šé¢˜ç›®
            selectedQuestions.push(...normalQuestions.slice(0, normalCount));
            
            // æ·»åŠ å¸Œæœ›ä¹‹æ˜Ÿé¢˜ç›®
            selectedQuestions.push(...starQuestions.slice(0, starCount));
            
            // éšæœºæ’åºæ‰€æœ‰é¢˜ç›®
            shuffleArray(selectedQuestions);
            
            gameState.questions = selectedQuestions;
        }

        // åˆå§‹åŒ–ç©å®¶è½¨é“
        function initPlayersTrack() {
            playersTrack.innerHTML = '';
            
            gameState.players.forEach((player, index) => {
                const playerTrack = document.createElement('div');
                playerTrack.className = 'player-track';
                if (index === 0) playerTrack.classList.add('active');
                
                playerTrack.innerHTML = `
                    <div class="player-avatar">${player.isBot ? 'ğŸ¤–' : 'ğŸ‘¤'}</div>
                    <div class="player-name">${player.name}</div>
                    <div class="player-score">${player.score}åˆ†</div>
                `;
                
                playersTrack.appendChild(playerTrack);
            });
        }

        // ä¸‹ä¸€è½®
        function nextRound() {
            gameState.currentRound++;
            
            // æ›´æ–°è¿›åº¦æ˜¾ç¤º
            currentQuestionSpan.textContent = gameState.currentRound;
            totalQuestionsSpan.textContent = gameState.questions.length;
            progressFill.style.width = `${(gameState.currentRound / gameState.questions.length) * 100}%`;
            
            // æ›´æ–°å½“å‰ç©å®¶
            updateCurrentPlayer();
            
            // è·å–å½“å‰é—®é¢˜
            gameState.currentQuestion = gameState.questions[gameState.currentRound - 1];
            
            // æ˜¾ç¤ºé—®é¢˜
            displayQuestion(gameState.currentQuestion);
            
            // é‡ç½®ç­”æ¡ˆé€‰æ‹©
            resetAnswerSelection();
            
            // éšè—ç»“æœåŒºåŸŸ
            resultArea.style.display = 'none';
            
            // éšè—ç»§ç»­æŒ‰é’®ï¼Œæ˜¾ç¤ºæäº¤æŒ‰é’®
            nextQuestionBtn.style.display = 'none';
            submitAnswerBtn.style.display = 'inline-block';
            submitAnswerBtn.disabled = true;
            
            // ç¡®ä¿é‡æ–°å¼€å§‹æŒ‰é’®å§‹ç»ˆæ˜¾ç¤º
            restartGameBtn.style.display = 'inline-block';
            
            // ç¡®ä¿é‡å¤æœ—è¯»æŒ‰é’®æ˜¾ç¤ºæ­£å¸¸
            repeatQuestionBtn.style.display = 'inline-block';
            repeatQuestionBtn.textContent = 'é‡å¤æœ—è¯»';
            repeatQuestionBtn.onclick = speakQuestion;
            
            // å¦‚æœæ˜¯æœºå™¨äººç©å®¶ï¼Œè‡ªåŠ¨å›ç­”
            if (gameState.players[gameState.currentPlayerIndex].isBot) {
                botAnswer();
            }
        }

        // æ›´æ–°å½“å‰ç©å®¶
        function updateCurrentPlayer() {
            // æ›´æ–°ç©å®¶è½¨é“
            document.querySelectorAll('.player-track').forEach((track, index) => {
                if (index === gameState.currentPlayerIndex) {
                    track.classList.add('active');
                } else {
                    track.classList.remove('active');
                }
            });
            
            // æ›´æ–°å½“å‰ç©å®¶åç§°
            currentPlayerName.textContent = gameState.players[gameState.currentPlayerIndex].name;
        }

        // æ˜¾ç¤ºé—®é¢˜
        function displayQuestion(question) {
            // æ˜¾ç¤ºé—®é¢˜æ–‡æœ¬
            questionText.innerHTML = question.text.replace('___', '<span class="blank">____</span>');
            
            // æ˜¾ç¤ºæ˜Ÿçº§æŒ‡ç¤ºå™¨
            if (question.star) {
                starIndicator.style.display = 'inline';
                questionText.innerHTML += '<div class="star-badge"><span class="star-icon">â˜…</span>å¸Œæœ›ä¹‹æ˜Ÿé¢˜ç›®</div>';
            } else {
                starIndicator.style.display = 'none';
            }
            
            // æ˜¾ç¤ºç­”æ¡ˆé€‰é¡¹
            answersArea.innerHTML = '';
            for (const [key, value] of Object.entries(question.answers)) {
                const answerOption = document.createElement('div');
                answerOption.className = 'answer-option';
                answerOption.textContent = value;
                answerOption.dataset.key = key;
                answerOption.addEventListener('click', () => selectAnswer(key));
                answersArea.appendChild(answerOption);
            }
            
            // æœ—è¯»é—®é¢˜
            speakQuestion();
        }

        // é€‰æ‹©ç­”æ¡ˆ
        function selectAnswer(key) {
            // å¦‚æœå½“å‰ç©å®¶æ˜¯æœºå™¨äººï¼Œä¸å…è®¸æ‰‹åŠ¨é€‰æ‹©
            if (gameState.players[gameState.currentPlayerIndex].isBot) {
                return;
            }
            
            // é‡ç½®æ‰€æœ‰é€‰é¡¹çš„é€‰æ‹©çŠ¶æ€
            document.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // è®¾ç½®å½“å‰é€‰é¡¹ä¸ºé€‰ä¸­çŠ¶æ€
            const selectedOption = document.querySelector(`.answer-option[data-key="${key}"]`);
            selectedOption.classList.add('selected');
            
            // ä¿å­˜é€‰æ‹©çš„ç­”æ¡ˆ
            gameState.selectedAnswer = key;
            
            // å¯ç”¨æäº¤æŒ‰é’®
            submitAnswerBtn.disabled = false;
        }

        // é‡ç½®ç­”æ¡ˆé€‰æ‹©
        function resetAnswerSelection() {
            gameState.selectedAnswer = null;
            document.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
        }

        // æäº¤ç­”æ¡ˆ
        function submitAnswer() {
            if (!gameState.selectedAnswer) return;
            
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            const isCorrect = gameState.selectedAnswer === gameState.currentQuestion.correct;
            
            // æ˜¾ç¤ºç»“æœ
            showResult(isCorrect);
            
            // æ›´æ–°åˆ†æ•°
            if (isCorrect) {
                if (gameState.currentQuestion.star) {
                    currentPlayer.score += 20; // å¸Œæœ›ä¹‹æ˜Ÿé¢˜ç›®æ­£ç¡®+20
                } else {
                    currentPlayer.score += 10; // æ™®é€šé¢˜ç›®æ­£ç¡®+10
                }
            } else {
                if (gameState.currentQuestion.star) {
                    currentPlayer.score -= 10; // å¸Œæœ›ä¹‹æ˜Ÿé¢˜ç›®é”™è¯¯-10
                } else {
                    currentPlayer.score -= 5; // æ™®é€šé¢˜ç›®é”™è¯¯-5
                }
                
                // ç¡®ä¿åˆ†æ•°ä¸ä¸ºè´Ÿ
                if (currentPlayer.score < 0) {
                    currentPlayer.score = 0;
                }
                
                // ç­”é”™é¢˜æ·»åŠ åˆ°é”™é¢˜æœ¬
                addToWrongQuestions(gameState.currentQuestion);
            }
            
            // æ›´æ–°ç©å®¶è½¨é“æ˜¾ç¤º
            updatePlayersTrack();
            
            // éšè—æäº¤æŒ‰é’®ï¼Œæ˜¾ç¤ºç»§ç»­æŒ‰é’®
            submitAnswerBtn.style.display = 'none';
            nextQuestionBtn.style.display = 'inline-block';
            
            // ç¡®ä¿é‡æ–°å¼€å§‹æŒ‰é’®å§‹ç»ˆæ˜¾ç¤º
            restartGameBtn.style.display = 'inline-block';
            
            // ç¡®ä¿é‡å¤æœ—è¯»æŒ‰é’®æ˜¾ç¤ºæ­£å¸¸
            repeatQuestionBtn.style.display = 'inline-block';
            repeatQuestionBtn.textContent = 'é‡å¤æœ—è¯»';
            repeatQuestionBtn.onclick = speakQuestion;
            
            // å¦‚æœæ˜¯æœ€åä¸€é¢˜ï¼Œæ˜¾ç¤ºæ¸¸æˆç»“æŸ
            if (gameState.currentRound >= gameState.questions.length) {
                setTimeout(endGame, 2000);
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(isCorrect) {
            // æ ‡è®°æ­£ç¡®ç­”æ¡ˆå’Œé”™è¯¯ç­”æ¡ˆ
            document.querySelectorAll('.answer-option').forEach(option => {
                if (option.dataset.key === gameState.currentQuestion.correct) {
                    option.classList.add('correct');
                } else if (option.dataset.key === gameState.selectedAnswer && !isCorrect) {
                    option.classList.add('incorrect');
                }
            });
            
            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            resultArea.style.display = 'block';
            resultArea.className = isCorrect ? 'result-area result-correct' : 'result-area result-incorrect';
            
            // è®¡ç®—å¾—åˆ†å˜åŒ–
            let scoreChange = 0;
            if (isCorrect) {
                scoreChange = gameState.currentQuestion.star ? 20 : 10;
            } else {
                scoreChange = gameState.currentQuestion.star ? -10 : -5;
            }
            
            // æ˜¾ç¤ºç»“æœæ–‡æœ¬
            if (isCorrect) {
                resultArea.innerHTML = `
                    <h3>å›ç­”æ­£ç¡®ï¼</h3>
                    <div class="score-change score-positive">+${scoreChange}åˆ†</div>
                `;
            } else {
                resultArea.innerHTML = `
                    <h3>å›ç­”é”™è¯¯ï¼</h3>
                    <div class="score-change score-negative">${scoreChange}åˆ†</div>
                    <div>æ­£ç¡®ç­”æ¡ˆ: ${gameState.currentQuestion.answers[gameState.currentQuestion.correct]}</div>
                `;
            }
            
            // æ˜¾ç¤ºè§£é‡Š
            const explanation = document.createElement('div');
            explanation.className = 'explanation';
            explanation.innerHTML = `
                <p><strong>ä¸­æ–‡è§£é‡Š:</strong> ${gameState.currentQuestion.explanation.zh}</p>
                <p><strong>Giáº£i thÃ­ch tiáº¿ng Viá»‡t:</strong> ${gameState.currentQuestion.explanation.vi}</p>
            `;
            resultArea.appendChild(explanation);
        }

        // æ›´æ–°ç©å®¶è½¨é“
        function updatePlayersTrack() {
            document.querySelectorAll('.player-track').forEach((track, index) => {
                const player = gameState.players[index];
                track.querySelector('.player-score').textContent = `${player.score}åˆ†`;
            });
        }

        // æœºå™¨äººå›ç­”
        function botAnswer() {
            // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            if (gameState.botTimer) {
                clearTimeout(gameState.botTimer);
            }
            
            // æœºå™¨äººæœ‰80%çš„æ¦‚ç‡ç­”å¯¹æ™®é€šé¢˜ï¼Œ60%çš„æ¦‚ç‡ç­”å¯¹æ˜Ÿçº§é¢˜
            const isStarQuestion = gameState.currentQuestion.star;
            const correctProbability = isStarQuestion ? 0.6 : 0.8;
            const shouldAnswerCorrectly = Math.random() < correctProbability;
            
            let selectedKey;
            
            if (shouldAnswerCorrectly) {
                selectedKey = gameState.currentQuestion.correct;
            } else {
                // éšæœºé€‰æ‹©ä¸€ä¸ªé”™è¯¯ç­”æ¡ˆ
                const wrongKeys = Object.keys(gameState.currentQuestion.answers).filter(key => key !== gameState.currentQuestion.correct);
                selectedKey = wrongKeys[Math.floor(Math.random() * wrongKeys.length)];
            }
            
            // å»¶è¿Ÿ1-3ç§’åå›ç­”ï¼Œæ¨¡æ‹Ÿæ€è€ƒè¿‡ç¨‹
            const delay = 1000 + Math.random() * 2000;
            gameState.botTimer = setTimeout(() => {
                gameState.selectedAnswer = selectedKey;
                submitAnswer();
            }, delay);
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            // åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªç©å®¶
            gameState.currentPlayerIndex = (gameState.currentPlayerIndex + 1) % gameState.players.length;
            
            // å¦‚æœæ˜¯æœ€åä¸€é¢˜ï¼Œç»“æŸæ¸¸æˆ
            if (gameState.currentRound >= gameState.questions.length) {
                endGame();
            } else {
                nextRound();
            }
        }

        // ç»“æŸæ¸¸æˆ
        function endGame() {
            // æ‰¾åˆ°æœ€é«˜åˆ†
            const maxScore = Math.max(...gameState.players.map(p => p.score));
            const winners = gameState.players.filter(p => p.score === maxScore);
            
            // æ˜¾ç¤ºæ¸¸æˆç»“æŸä¿¡æ¯
            questionText.innerHTML = `<h2>æ¸¸æˆç»“æŸï¼</h2>`;
            
            let winnerText = '';
            if (winners.length === 1) {
                winnerText = `è·èƒœè€…: ${winners[0].name} (${winners[0].score}åˆ†)`;
            } else {
                winnerText = `å¹³å±€ï¼ ${winners.map(w => w.name).join('ã€')} (${maxScore}åˆ†)`;
            }
            
            answersArea.innerHTML = `<h3>${winnerText}</h3>`;
            
            // æ˜¾ç¤ºæ‰€æœ‰ç©å®¶åˆ†æ•°
            let scoresHTML = '<ul style="list-style: none; padding: 0; margin: 20px 0;">';
            gameState.players.forEach(player => {
                scoresHTML += `<li style="margin: 10px 0; font-size: 1.2rem;">${player.name}: ${player.score}åˆ†</li>`;
            });
            scoresHTML += '</ul>';
            
            answersArea.innerHTML += scoresHTML;
            
            // éšè—å…¶ä»–å…ƒç´ 
            document.querySelector('.progress-bar').style.display = 'none';
            document.querySelector('.game-header').style.display = 'none';
            resultArea.style.display = 'none';
            nextQuestionBtn.style.display = 'none';
            submitAnswerBtn.style.display = 'none';
            
            // ç¡®ä¿é‡æ–°å¼€å§‹æŒ‰é’®å§‹ç»ˆæ˜¾ç¤º
            restartGameBtn.style.display = 'inline-block';
            
            // æ¸¸æˆç»“æŸæ—¶ï¼Œå°†"é‡å¤æœ—è¯»"æŒ‰é’®å˜ä¸º"é‡æ–°å¼€å§‹"æŒ‰é’®
            repeatQuestionBtn.style.display = 'inline-block';
            repeatQuestionBtn.textContent = 'é‡æ–°å¼€å§‹';
            repeatQuestionBtn.onclick = restartGame;
            
            // å¦‚æœæœ‰è·èƒœè€…ï¼Œæ˜¾ç¤ºçƒŸèŠ±
            if (maxScore > 0) {
                showFireworks();
            }
        }

        // æ˜¾ç¤ºçƒŸèŠ±æ•ˆæœ
        function showFireworks() {
            const fireworks = document.getElementById('fireworks');
            fireworks.style.display = 'block';
            
            // ç®€å•çš„çƒŸèŠ±æ•ˆæœ
            setTimeout(() => {
                fireworks.style.display = 'none';
            }, 3000);
        }

        // åˆå§‹åŒ–è¯­éŸ³è®¾ç½®
        function initSpeechSettings() {
            // åŠ è½½å¯ç”¨çš„è¯­éŸ³
            loadVoices();
            
            // å¦‚æœè¯­éŸ³åˆ—è¡¨å°šæœªåŠ è½½ï¼Œè®¾ç½®ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è®¾ç½®
            const savedSettings = localStorage.getItem('speechSettings');
            if (savedSettings) {
                gameState.speechSettings = JSON.parse(savedSettings);
                document.getElementById('speedSlider').value = gameState.speechSettings.rate;
                document.getElementById('pitchSlider').value = gameState.speechSettings.pitch;
                updateSpeedValue();
                updatePitchValue();
            }
        }

        // åŠ è½½è¯­éŸ³åˆ—è¡¨
        function loadVoices() {
            const voices = speechSynthesis.getVoices();
            const voiceSelect = document.getElementById('voiceSelect');
            
            voiceSelect.innerHTML = '';
            
            // ä¼˜å…ˆé€‰æ‹©ä¸­æ–‡è¯­éŸ³
            let chineseVoices = voices.filter(voice => voice.lang.includes('zh'));
            let otherVoices = voices.filter(voice => !voice.lang.includes('zh'));
            
            if (chineseVoices.length > 0) {
                chineseVoices.forEach(voice => {
                    const option = document.createElement('option');
                    option.value = voice.name;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    voiceSelect.appendChild(option);
                });
                
                // æ·»åŠ åˆ†éš”çº¿
                const separator = document.createElement('option');
                separator.disabled = true;
                separator.textContent = 'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€';
                voiceSelect.appendChild(separator);
            }
            
            otherVoices.forEach(voice => {
                const option = document.createElement('option');
                option.value = voice.name;
                option.textContent = `${voice.name} (${voice.lang})`;
                voiceSelect.appendChild(option);
            });
            
            // è®¾ç½®å·²ä¿å­˜çš„è¯­éŸ³
            if (gameState.speechSettings.voice) {
                voiceSelect.value = gameState.speechSettings.voice;
            }
        }

        // æ›´æ–°é€Ÿåº¦å€¼æ˜¾ç¤º
        function updateSpeedValue() {
            document.getElementById('speedValue').textContent = document.getElementById('speedSlider').value;
        }

        // æ›´æ–°éŸ³è°ƒå€¼æ˜¾ç¤º
        function updatePitchValue() {
            document.getElementById('pitchValue').textContent = document.getElementById('pitchSlider').value;
        }

        // æµ‹è¯•è¯­éŸ³
        function testVoice() {
            const testText = 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è¯­éŸ³ã€‚è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è¯­éŸ³ã€‚';
            speakText(testText);
        }

        // æœ—è¯»é—®é¢˜
        function speakQuestion() {
            if (!gameState.currentQuestion) return;
            
            // å°†é—®é¢˜ä¸­çš„"___"æ›¿æ¢ä¸º"ç©ºç™½"
            const textToSpeak = gameState.currentQuestion.text.replace('___', 'ç©ºç™½');
            speakText(textToSpeak);
        }

        // æœ—è¯»æ–‡æœ¬
        function speakText(text) {
            // å¦‚æœè¯­éŸ³åˆæˆæ­£åœ¨è¯´è¯ï¼Œåœæ­¢å®ƒ
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
            
            const utterance = new SpeechSynthesisUtterance(text);
            
            // è®¾ç½®è¯­éŸ³
            const voiceSelect = document.getElementById('voiceSelect');
            const voices = speechSynthesis.getVoices();
            const selectedVoice = voices.find(voice => voice.name === voiceSelect.value);
            
            if (selectedVoice) {
                utterance.voice = selectedVoice;
            }
            
            // è®¾ç½®è¯­é€Ÿå’ŒéŸ³è°ƒ
            utterance.rate = parseFloat(document.getElementById('speedSlider').value);
            utterance.pitch = parseFloat(document.getElementById('pitchSlider').value);
            
            // æœ—è¯»
            speechSynthesis.speak(utterance);
        }

        // ä¿å­˜è®¾ç½®
        function saveSettings() {
            const voiceSelect = document.getElementById('voiceSelect');
            const speedSlider = document.getElementById('speedSlider');
            const pitchSlider = document.getElementById('pitchSlider');
            
            gameState.speechSettings = {
                voice: voiceSelect.value,
                rate: parseFloat(speedSlider.value),
                pitch: parseFloat(pitchSlider.value)
            };
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('speechSettings', JSON.stringify(gameState.speechSettings));
            
            // æ˜¾ç¤ºä¿å­˜æˆåŠŸæ¶ˆæ¯
            document.getElementById('voiceStatus').textContent = 'è®¾ç½®å·²ä¿å­˜ï¼';
            setTimeout(() => {
                document.getElementById('voiceStatus').textContent = '';
            }, 2000);
        }

        // æ˜¾ç¤ºè®¾ç½®é¢æ¿
        function showSettings() {
            settingsPanel.style.display = 'block';
            gameSetup.style.display = 'none';
        }

        // å…³é—­è®¾ç½®é¢æ¿
        function closeSettings() {
            settingsPanel.style.display = 'none';
            gameSetup.style.display = 'block';
        }

        // åˆå§‹åŒ–é”™é¢˜æœ¬
        function initWrongQuestions() {
            if (!localStorage.getItem('wrongQuestions')) {
                localStorage.setItem('wrongQuestions', JSON.stringify([]));
            }
        }

        // æ·»åŠ åˆ°é”™é¢˜æœ¬
        function addToWrongQuestions(question) {
            const wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions'));
            
            // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨
            const exists = wrongQuestions.some(q => q.id === question.id);
            if (!exists) {
                wrongQuestions.push(question);
                localStorage.setItem('wrongQuestions', JSON.stringify(wrongQuestions));
            }
        }

        // æ˜¾ç¤ºé”™é¢˜æœ¬
        function showWrongQuestions() {
            const wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions'));
            const wrongQuestionsList = document.getElementById('wrongQuestionsList');
            
            wrongQuestionsList.innerHTML = '';
            
            if (wrongQuestions.length === 0) {
                wrongQuestionsList.innerHTML = '<p>è¿˜æ²¡æœ‰é”™é¢˜è®°å½•ã€‚</p>';
            } else {
                wrongQuestions.forEach(question => {
                    const wrongItem = document.createElement('div');
                    wrongItem.className = 'wrong-item';
                    wrongItem.innerHTML = `
                        <p><strong>${question.text}</strong></p>
                        <p>æ­£ç¡®ç­”æ¡ˆ: ${question.answers[question.correct]}</p>
                        <div class="explanation">
                            <p><strong>ä¸­æ–‡è§£é‡Š:</strong> ${question.explanation.zh}</p>
                            <p><strong>Giáº£i thÃ­ch tiáº¿ng Viá»‡t:</strong> ${question.explanation.vi}</p>
                        </div>
                    `;
                    wrongQuestionsList.appendChild(wrongItem);
                });
            }
            
            wrongQuestionsPanel.style.display = 'block';
            gameSetup.style.display = 'none';
        }

        // å…³é—­é”™é¢˜æœ¬
        function closeWrongQuestions() {
            wrongQuestionsPanel.style.display = 'none';
            gameSetup.style.display = 'block';
        }

        // æ¸…ç©ºé”™é¢˜æœ¬
        function clearWrongQuestions() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºé”™é¢˜æœ¬å—ï¼Ÿ')) {
                localStorage.setItem('wrongQuestions', JSON.stringify([]));
                showWrongQuestions();
            }
        }

        // å·¥å…·å‡½æ•°ï¼šæ‰“ä¹±æ•°ç»„
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState = {
                players: [],
                currentPlayerIndex: 0,
                currentRound: 0,
                questions: [],
                selectedAnswer: null,
                isGameStarted: false,
                speechSettings: gameState.speechSettings, // ä¿ç•™è¯­éŸ³è®¾ç½®
                botTimer: null,
                currentQuestion: null
            };
            
            // æ˜¾ç¤ºæ¸¸æˆè®¾ç½®ç•Œé¢ï¼Œéšè—æ¸¸æˆåŒºåŸŸ
            gameSetup.style.display = 'block';
            gameArea.style.display = 'none';
            
            // é‡ç½®æ¸¸æˆåŒºåŸŸæ˜¾ç¤º
            document.querySelector('.progress-bar').style.display = 'block';
            document.querySelector('.game-header').style.display = 'flex';
            restartGameBtn.style.display = 'inline-block';
            progressFill.style.width = '0%';
            
            // é‡ç½®é‡å¤æœ—è¯»æŒ‰é’®
            repeatQuestionBtn.style.display = 'inline-block';
            repeatQuestionBtn.textContent = 'é‡å¤æœ—è¯»';
            repeatQuestionBtn.onclick = speakQuestion;
            
            // éšè—çƒŸèŠ±
            document.getElementById('fireworks').style.display = 'none';
        }

        // äº‹ä»¶ç›‘å¬å™¨ç»‘å®š
        submitAnswerBtn.addEventListener('click', submitAnswer);
        nextQuestionBtn.addEventListener('click', nextQuestion);

        // åˆå§‹åŒ–æ¸¸æˆ
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>